
class ConvertSapDocument():
    def __init__(self, data) -> None:
        self.__data = data

    def get_user(self):
        user = self.__data["sap_json"]["config"]
        json_user = {
            "Password": user["password"],
            "UserName": user["username"]
        }
        return json_user

    def get_sn(self):
        config = self.__data["sap_json"]["config"]
        order = self.__data["order"]

        json_sn = {
            "CardCode": "C"+order["customer"]["rut"],
            "CardName": order["customer"]["name"],
            "CardType": "cCustomer",
            "GroupCode": 100,
            "FederalTaxID": order["customer"]["rut"],
            "EmailAddress": order["customer"]["email"],
            "CardForeignName":"SERVICIO DE SALUD IQUIQUE", # duda
            "ShipToDefault":"DESPACHO", # duda
            "BilltoDefault":"FACTURACION", # duda
            "U_SEI_GNRP": "GOBIERNO",
            "DebitorAccount":"110401001", # duda
            "U_Tipo": "N",
            "Currency": order["extra_info"]["currency"],
            "BPAddresses":[ # nodo duda
                {
                    "AddressName":"DESPACHO",
                    "Street":"TEST1,",
                    "City":"IQUIQUE",
                    "County":"IQUIQUE",
                    "Country":"CL",
                    "State":"1",
                    "TaxCode":"IVA",
                    "AddressType":"bo_ShipTo"
                },
                {
                    "AddressName":"FACTURACION",
                    "Street":"TEST 2,",
                    "City":"IQUIQUE",
                    "County":"IQUIQUE",
                    "Country":"CL",
                    "State":"1",
                    "TaxCode":"IVA",
                    "AddressType":"bo_BillTo"
                }
            ],
            "ContactEmployees":[ # nodo duda
                {
                    "Name":"Delia Riquelme",
                    "Phone1":"56-57-2535017",
                    "E_Mail":"juan.toros@redsalud.gob.cl",
                    "FirstName":"Delia",
                    "MiddleName":"null",
                    "LastName":"TORO"
                }
            ]

        }

        return json_sn

    def get_products(self):
        products = self.__data["order"]["products"]
        json_product= []

        for item in products:
            json_product.append({
                "ItemCode": item["id"],
                "TaxCode":"IVA",
                "Quantity": item["quantity"],
                "Price": item["price"]
            })
        return json_product

    def get_order(self):
        order = self.__data["order"]
        json_order = {
            "U_SEI_IDPS":223, # duda
            "DocDate": order["date"],
            "DocDueDate": order["date"],
            "TaxDate": order["date"],
            "CardCode": "C"+order["customer"]["rut"],
            "DocCurrency": order["extra_info"]["currency"],
            "DocRate":1,
            "SalesPersonCode":1, # duda
            "ContactPersonCode":"null", # duda
            "ShipToCode":"DESPACHO", # duda
            "Indicator":"39",
            "FederalTaxID": order["customer"]["rut"],
            "DiscountPercent": order["adjustment"],
            "U_SEI_FOREF": order["id"],
            "U_SEI_FEREF": order["date"],
            "U_SEI_INREF":801,
            "DocumentLines": self.get_products()

        }
        return json_order

    def get_pago(self):

        json_pago = {

            "CreditCard":1,
            "CreditCardNumber":"6789",
            "CardValidUntil":"2022-12-31",
            "VoucherNum":"200",
            "ConfirmationNum":"400",
            "NumOfPayments":1
        }
        return json_pago

    def join_json_sap(self):

        json_sap_document = {
            "User": self.get_user(),
            "SN":self.get_sn(),
            "Order": self.get_order(),
            "Pago": self.get_pago()
        }

        return json_sap_document

    def send_sap(self, data_converted):
        # TODO: falta implementar metetodo que mande a sap}
        # mientras tanto hay un mock
        return {
            "Creado": True,
            "DetalleCreado": "{\"OrdenVenta\":{\"operation\":\"add\",\"status\":201,\"body\":{\"odata.metadata\":\"https://hanab1:50000/b1s/v1/script/$metadata#Orders/@Element\",\"odata.etag\":\"W/\\\"356A192B7913B04C54574D18C28D46E6395428AB\\\"\",\"DocEntry\":180,\"DocNum\":13,\"DocType\":\"dDocument_Items\",\"HandWritten\":\"tNO\",\"Printed\":\"psNo\",\"DocDate\":\"2021-12-07\",\"DocDueDate\":\"2021-12-07\",\"CardCode\":\"CTEST1\",\"CardName\":\"DELIA RIQUELME VERA\",\"Address\":\"TEST 2,\\r\\rIQUIQUE\\rCHILE\",\"NumAtCard\":null,\"DocTotal\":4165,\"AttachmentEntry\":null,\"DocCurrency\":\"CLP\",\"DocRate\":1,\"Reference1\":\"13\",\"Reference2\":null,\"Comments\":\"\",\"JournalMemo\":\"Pedidos de cliente - CTEST1\",\"PaymentGroupCode\":-1,\"DocTime\":\"12:11:00\",\"SalesPersonCode\":1,\"TransportationCode\":-1,\"Confirmed\":\"tYES\",\"ImportFileNum\":null,\"SummeryType\":\"dNoSummary\",\"ContactPersonCode\":1518,\"ShowSCN\":\"tNO\",\"Series\":26,\"TaxDate\":\"2021-12-07\",\"PartialSupply\":\"tYES\",\"DocObjectCode\":\"oOrders\",\"ShipToCode\":\"DESPACHO\",\"Indicator\":\"39\",\"FederalTaxID\":\"9746170-8\",\"DiscountPercent\":0,\"PaymentReference\":\"\",\"CreationDate\":\"2022-01-12\",\"UpdateDate\":\"2022-01-12\",\"FinancialPeriod\":12,\"UserSign\":28,\"TransNum\":null,\"VatSum\":665,\"VatSumSys\":1,\"VatSumFc\":0,\"NetProcedure\":\"tNO\",\"DocTotalFc\":0,\"DocTotalSys\":5,\"Form1099\":null,\"Box1099\":null,\"RevisionPo\":\"tNO\",\"RequriedDate\":\"2021-12-07\",\"CancelDate\":\"2022-01-06\",\"BlockDunning\":\"tNO\",\"Submitted\":\"tNO\",\"Segment\":0,\"PickStatus\":\"tNO\",\"Pick\":\"tNO\",\"PaymentMethod\":null,\"PaymentBlock\":\"tNO\",\"PaymentBlockEntry\":null,\"CentralBankIndicator\":null,\"MaximumCashDiscount\":\"tNO\",\"Reserve\":\"tNO\",\"Project\":null,\"ExemptionValidityDateFrom\":null,\"ExemptionValidityDateTo\":null,\"WareHouseUpdateType\":\"dwh_CustomerOrders\",\"Rounding\":\"tNO\",\"ExternalCorrectedDocNum\":null,\"InternalCorrectedDocNum\":null,\"NextCorrectingDocument\":null,\"DeferredTax\":\"tNO\",\"TaxExemptionLetterNum\":null,\"WTApplied\":0,\"WTAppliedFC\":0,\"BillOfExchangeReserved\":\"tNO\",\"AgentCode\":null,\"WTAppliedSC\":0,\"TotalEqualizationTax\":0,\"TotalEqualizationTaxFC\":0,\"TotalEqualizationTaxSC\":0,\"NumberOfInstallments\":1,\"ApplyTaxOnFirstInstallment\":\"tNO\",\"WTNonSubjectAmount\":0,\"WTNonSubjectAmountSC\":0,\"WTNonSubjectAmountFC\":0,\"WTExemptedAmount\":0,\"WTExemptedAmountSC\":0,\"WTExemptedAmountFC\":0,\"BaseAmount\":0,\"BaseAmountSC\":0,\"BaseAmountFC\":0,\"WTAmount\":0,\"WTAmountSC\":0,\"WTAmountFC\":0,\"VatDate\":null,\"DocumentsOwner\":null,\"FolioPrefixString\":null,\"FolioNumber\":null,\"DocumentSubType\":\"bod_None\",\"BPChannelCode\":null,\"BPChannelContact\":null,\"Address2\":\"TEST1,\\r\\rIQUIQUE\\rCHILE\",\"DocumentStatus\":\"bost_Open\",\"PeriodIndicator\":\"Valor de p\",\"PayToCode\":null,\"ManualNumber\":null,\"UseShpdGoodsAct\":\"tNO\",\"IsPayToBank\":null,\"PayToBankCountry\":null,\"PayToBankCode\":null,\"PayToBankAccountNo\":null,\"PayToBankBranch\":null,\"BPL_IDAssignedToInvoice\":null,\"DownPayment\":0,\"ReserveInvoice\":\"tNO\",\"LanguageCode\":25,\"TrackingNumber\":null,\"PickRemark\":null,\"ClosingDate\":null,\"SequenceCode\":null,\"SequenceSerial\":null,\"SeriesString\":null,\"SubSeriesString\":null,\"SequenceModel\":\"0\",\"UseCorrectionVATGroup\":\"tNO\",\"TotalDiscount\":0,\"DownPaymentAmount\":0,\"DownPaymentPercentage\":0,\"DownPaymentType\":\"dptInvoice\",\"DownPaymentAmountSC\":0,\"DownPaymentAmountFC\":0,\"VatPercent\":0,\"ServiceGrossProfitPercent\":0,\"OpeningRemarks\":null,\"ClosingRemarks\":null,\"RoundingDiffAmount\":0,\"RoundingDiffAmountFC\":0,\"RoundingDiffAmountSC\":0,\"Cancelled\":\"tNO\",\"SignatureInputMessage\":null,\"SignatureDigest\":null,\"CertificationNumber\":null,\"PrivateKeyVersion\":null,\"ControlAccount\":\"110401001\",\"InsuranceOperation347\":\"tNO\",\"ArchiveNonremovableSalesQuotation\":\"tNO\",\"GTSChecker\":null,\"GTSPayee\":null,\"ExtraMonth\":0,\"ExtraDays\":0,\"CashDiscountDateOffset\":0,\"StartFrom\":\"pdt_None\",\"NTSApproved\":\"tNO\",\"ETaxWebSite\":null,\"ETaxNumber\":null,\"NTSApprovedNumber\":null,\"EDocGenerationType\":\"edocNotRelevant\",\"EDocSeries\":null,\"EDocNum\":null,\"EDocExportFormat\":null,\"EDocStatus\":\"edoc_Ok\",\"EDocErrorCode\":null,\"EDocErrorMessage\":null,\"DownPaymentStatus\":\"so_Open\",\"GroupSeries\":null,\"GroupNumber\":null,\"GroupHandWritten\":\"tNO\",\"ReopenOriginalDocument\":null,\"ReopenManuallyClosedOrCanceledDocument\":null,\"CreateOnlineQuotation\":\"tNO\",\"POSEquipmentNumber\":null,\"POSManufacturerSerialNumber\":null,\"POSCashierNumber\":null,\"ApplyCurrentVATRatesForDownPaymentsToDraw\":\"tNO\",\"ClosingOption\":\"coByCurrentSystemDate\",\"SpecifiedClosingDate\":null,\"OpenForLandedCosts\":\"tYES\",\"AuthorizationStatus\":\"dasWithout\",\"TotalDiscountFC\":0,\"TotalDiscountSC\":0,\"RelevantToGTS\":\"tNO\",\"BPLName\":null,\"VATRegNum\":null,\"AnnualInvoiceDeclarationReference\":null,\"Supplier\":null,\"Releaser\":null,\"Receiver\":null,\"BlanketAgreementNumber\":null,\"IsAlteration\":\"tNO\",\"CancelStatus\":\"csNo\",\"AssetValueDate\":null,\"DocumentDelivery\":\"ddtNoneSeleted\",\"AuthorizationCode\":null,\"StartDeliveryDate\":null,\"StartDeliveryTime\":null,\"EndDeliveryDate\":null,\"EndDeliveryTime\":null,\"VehiclePlate\":null,\"ATDocumentType\":null,\"ElecCommStatus\":null,\"ElecCommMessage\":null,\"ReuseDocumentNum\":\"tNO\",\"ReuseNotaFiscalNum\":\"tNO\",\"PrintSEPADirect\":\"tNO\",\"FiscalDocNum\":null,\"POSDailySummaryNo\":null,\"POSReceiptNo\":null,\"PointOfIssueCode\":null,\"Letter\":null,\"FolioNumberFrom\":null,\"FolioNumberTo\":null,\"InterimType\":\"boidt_None\",\"RelatedType\":-1,\"RelatedEntry\":null,\"SAPPassport\":null,\"DocumentTaxID\":null,\"DateOfReportingControlStatementVAT\":null,\"ReportingSectionControlStatementVAT\":null,\"ExcludeFromTaxReportControlStatementVAT\":\"tNO\",\"POS_CashRegister\":null,\"UpdateTime\":\"12:11:13\",\"CreateQRCodeFrom\":null,\"PriceMode\":null,\"ShipFrom\":\"DESPACHO\",\"CommissionTrade\":\"ct_Empty\",\"CommissionTradeReturn\":\"tNO\",\"UseBillToAddrToDetermineTax\":\"tNO\",\"Cig\":null,\"Cup\":null,\"FatherCard\":null,\"FatherType\":\"cPayments_sum\",\"ShipState\":null,\"ShipPlace\":null,\"CustOffice\":null,\"FCI\":null,\"AddLegIn\":null,\"LegTextF\":null,\"DANFELgTxt\":null,\"IndFinal\":\"tNO\",\"DataVersion\":1,\"U_SEI_CONTADO\":\"S\",\"U_SEI_FEBOSID\":null,\"U_SEI_FCHV\":null,\"U_Bol_Ini\":0,\"U_Bol_Fin\":0,\"U_NUMFACT\":null,\"U_SEI_PTT\":null,\"U_SEI_RTCH\":null,\"U_SEI_RTTR\":null,\"U_SEI_NCHF\":null,\"U_SEI_IMPR\":\"0\",\"U_SEI_TDES\":null,\"U_SEI_ITRS\":\"1\",\"U_SEI_ISER\":null,\"U_SEI_ISERB\":null,\"U_SEI_INREF\":\"801\",\"U_SEI_FOREF\":\"19/2021\",\"U_SEI_FEREF\":\"2021-11-30\",\"U_SEI_CREF\":\"0\",\"U_SEI_RAREF\":null,\"U_SEI_INREF2\":null,\"U_SEI_FOREF2\":null,\"U_SEI_FEREF2\":null,\"U_SEI_CREF2\":\"0\",\"U_SEI_RAREF2\":null,\"U_SEI_INREF3\":null,\"U_SEI_FOREF3\":null,\"U_SEI_FEREF3\":null,\"U_SEI_CREF3\":\"0\",\"U_SEI_RAREF3\":null,\"U_SEI_INREF4\":null,\"U_SEI_FOREF4\":null,\"U_SEI_FEREF4\":null,\"U_SEI_CREF4\":\"0\",\"U_SEI_RAREF4\":null,\"U_SEI_INREF5\":null,\"U_SEI_FOREF5\":null,\"U_SEI_FEREF5\":null,\"U_SEI_CREF5\":\"0\",\"U_SEI_RAREF5\":null,\"U_SEI_TBULTOS\":null,\"U_SEI_Name\":null,\"U_SEI_UnitPrice\":0,\"U_SEI_LineTotal\":0,\"U_SEI_VIATRANSPORTE\":0,\"U_SEI_CLAUSULAV\":0,\"U_SEI_IND\":\"52\",\"U_SEI_TTCOMPRA\":\"0\",\"U_SEI_TTVENTA\":\"0\",\"U_SEI_MVENTA\":\"0\",\"U_SEI_ESTDOC\":\"0\",\"U_SEI_CARPIMPORT\":null,\"U_SEI_PAISRECEPTOR\":null,\"U_SEI_PAISDESTINO\":null,\"U_SEI_PUERTOEMB\":null,\"U_SEI_PUERTODESEMB\":null,\"U_SEI_MOTIVO\":null,\"U_SEI_IDPS\":\"856\",\"Document_ApprovalRequests\":[],\"DocumentLines\":[{\"LineNum\":0,\"ItemCode\":\"INAIPSOY02\",\"ItemDescription\":\"SUPPRO NUGGET CACAO\",\"Quantity\":1,\"ShipDate\":\"2021-12-07\",\"Price\":3500,\"PriceAfterVAT\":4165,\"Currency\":\"CLP\",\"Rate\":0,\"DiscountPercent\":0,\"VendorNum\":null,\"SerialNum\":null,\"WarehouseCode\":\"BODMATRZ\",\"SalesPersonCode\":1,\"CommisionPercent\":0,\"TreeType\":\"iNotATree\",\"AccountCode\":\"710101001\",\"UseBaseUnits\":\"tNO\",\"SupplierCatNum\":null,\"CostingCode\":\"CC01\",\"ProjectCode\":null,\"BarCode\":null,\"VatGroup\":null,\"Height1\":0,\"Hight1Unit\":null,\"Height2\":0,\"Height2Unit\":null,\"Lengh1\":0,\"Lengh1Unit\":null,\"Lengh2\":0,\"Lengh2Unit\":null,\"Weight1\":0,\"Weight1Unit\":null,\"Weight2\":0,\"Weight2Unit\":null,\"Factor1\":1,\"Factor2\":1,\"Factor3\":1,\"Factor4\":1,\"BaseType\":-1,\"BaseEntry\":null,\"BaseLine\":null,\"Volume\":0,\"VolumeUnit\":4,\"Width1\":0,\"Width1Unit\":null,\"Width2\":0,\"Width2Unit\":null,\"Address\":\"\",\"TaxCode\":\"IVA\",\"TaxType\":\"tt_Yes\",\"TaxLiable\":\"tYES\",\"PickStatus\":\"tNO\",\"PickQuantity\":0,\"PickListIdNumber\":null,\"OriginalItem\":null,\"BackOrder\":\"tYES\",\"FreeText\":null,\"ShippingMethod\":-1,\"POTargetNum\":null,\"POTargetEntry\":null,\"POTargetRowNum\":null,\"CorrectionInvoiceItem\":\"ciis_ShouldBe\",\"CorrInvAmountToStock\":0,\"CorrInvAmountToDiffAcct\":0,\"AppliedTax\":0,\"AppliedTaxFC\":0,\"AppliedTaxSC\":0,\"WTLiable\":\"tNO\",\"DeferredTax\":\"tNO\",\"EqualizationTaxPercent\":0,\"TotalEqualizationTax\":0,\"TotalEqualizationTaxFC\":0,\"TotalEqualizationTaxSC\":0,\"NetTaxAmount\":665,\"NetTaxAmountFC\":0,\"NetTaxAmountSC\":1,\"MeasureUnit\":\"kg\",\"UnitsOfMeasurment\":1,\"LineTotal\":3500,\"TaxPercentagePerRow\":19,\"TaxTotal\":665,\"ConsumerSalesForecast\":\"tYES\",\"ExciseAmount\":0,\"TaxPerUnit\":0,\"TotalInclTax\":0,\"CountryOrg\":null,\"SWW\":null,\"TransactionType\":null,\"DistributeExpense\":\"tYES\",\"RowTotalFC\":0,\"RowTotalSC\":4,\"LastBuyInmPrice\":0,\"LastBuyDistributeSumFc\":0,\"LastBuyDistributeSumSc\":0,\"LastBuyDistributeSum\":0,\"StockDistributesumForeign\":0,\"StockDistributesumSystem\":0,\"StockDistributesum\":0,\"StockInmPrice\":0,\"PickStatusEx\":\"dlps_NotPicked\",\"TaxBeforeDPM\":0,\"TaxBeforeDPMFC\":0,\"TaxBeforeDPMSC\":0,\"CFOPCode\":null,\"CSTCode\":null,\"Usage\":null,\"TaxOnly\":\"tNO\",\"VisualOrder\":0,\"BaseOpenQuantity\":0,\"UnitPrice\":3500,\"LineStatus\":\"bost_Open\",\"PackageQuantity\":1,\"Text\":null,\"LineType\":\"dlt_Regular\",\"COGSCostingCode\":\"CC01\",\"COGSAccountCode\":\"810201001\",\"ChangeAssemlyBoMWarehouse\":\"N\",\"GrossBuyPrice\":10000,\"GrossBase\":-1,\"GrossProfitTotalBasePrice\":10000,\"CostingCode2\":null,\"CostingCode3\":null,\"CostingCode4\":null,\"CostingCode5\":null,\"ItemDetails\":null,\"LocationCode\":null,\"ActualDeliveryDate\":null,\"RemainingOpenQuantity\":1,\"OpenAmount\":3500,\"OpenAmountFC\":0,\"OpenAmountSC\":4,\"ExLineNo\":null,\"RequiredDate\":null,\"RequiredQuantity\":0,\"COGSCostingCode2\":null,\"COGSCostingCode3\":null,\"COGSCostingCode4\":null,\"COGSCostingCode5\":null,\"CSTforIPI\":null,\"CSTforPIS\":null,\"CSTforCOFINS\":null,\"CreditOriginCode\":null,\"WithoutInventoryMovement\":\"tNO\",\"AgreementNo\":null,\"AgreementRowNumber\":null,\"ActualBaseEntry\":null,\"ActualBaseLine\":null,\"DocEntry\":180,\"Surpluses\":0,\"DefectAndBreakup\":0,\"Shortages\":0,\"ConsiderQuantity\":\"tNO\",\"PartialRetirement\":\"tNO\",\"RetirementQuantity\":0,\"RetirementAPC\":0,\"ThirdParty\":\"tNO\",\"PoNum\":null,\"PoItmNum\":null,\"ExpenseType\":null,\"ReceiptNumber\":null,\"ExpenseOperationType\":null,\"FederalTaxID\":null,\"GrossProfit\":-6500,\"GrossProfitFC\":0,\"GrossProfitSC\":-9,\"PriceSource\":\"dpsActivePriceList\",\"StgSeqNum\":null,\"StgEntry\":null,\"StgDesc\":null,\"UoMEntry\":-1,\"UoMCode\":\"Manual\",\"InventoryQuantity\":1,\"RemainingOpenInventoryQuantity\":1,\"ParentLineNum\":null,\"Incoterms\":0,\"TransportMode\":0,\"NatureOfTransaction\":null,\"DestinationCountryForImport\":null,\"DestinationRegionForImport\":null,\"OriginCountryForExport\":null,\"OriginRegionForExport\":null,\"ItemType\":\"dit_Item\",\"ChangeInventoryQuantityIndependently\":\"tNO\",\"FreeOfChargeBP\":\"tNO\",\"SACEntry\":null,\"HSNEntry\":null,\"GrossPrice\":4165,\"GrossTotal\":4165,\"GrossTotalFC\":0,\"GrossTotalSC\":5,\"NCMCode\":-1,\"NVECode\":null,\"IndEscala\":\"tNO\",\"CtrSealQty\":0,\"CNJPMan\":null,\"CESTCode\":null,\"UFFiscalBenefitCode\":null,\"ReverseCharge\":\"tNO\",\"ShipToCode\":\"DESPACHO\",\"ShipToDescription\":\"TEST1,\\r\\rIQUIQUE\\rCHILE\",\"OwnerCode\":null,\"ExternalCalcTaxRate\":0,\"ExternalCalcTaxAmount\":0,\"ExternalCalcTaxAmountFC\":0,\"ExternalCalcTaxAmountSC\":0,\"StandardItemIdentification\":null,\"CommodityClassification\":null,\"UnencumberedReason\":null,\"CUSplit\":\"tNO\",\"U_SEI_IDEX\":null,\"U_SEI_CODMIN\":null,\"U_SEI_ITEMIN\":null,\"LineTaxJurisdictions\":[{\"JurisdictionCode\":\"IVA\",\"JurisdictionType\":1,\"TaxAmount\":665,\"TaxAmountSC\":1,\"TaxAmountFC\":0,\"TaxRate\":19,\"DocEntry\":180,\"LineNumber\":0,\"RowSequence\":0,\"ExternalCalcTaxRate\":0,\"ExternalCalcTaxAmount\":0,\"ExternalCalcTaxAmountFC\":0,\"ExternalCalcTaxAmountSC\":0}],\"DocumentLineAdditionalExpenses\":[],\"WithholdingTaxLines\":[],\"SerialNumbers\":[],\"BatchNumbers\":[],\"DocumentLinesBinAllocations\":[]}],\"ElectronicProtocols\":[],\"DocumentAdditionalExpenses\":[],\"WithholdingTaxDataWTXCollection\":[],\"WithholdingTaxDataCollection\":[],\"DocumentSpecialLines\":[],\"TaxExtension\":{\"TaxId0\":null,\"TaxId1\":null,\"TaxId2\":null,\"TaxId3\":null,\"TaxId4\":null,\"TaxId5\":null,\"TaxId6\":null,\"TaxId7\":null,\"TaxId8\":null,\"TaxId9\":null,\"State\":null,\"County\":null,\"Incoterms\":null,\"Vehicle\":null,\"VehicleState\":null,\"NFRef\":null,\"Carrier\":null,\"PackQuantity\":null,\"PackDescription\":null,\"Brand\":null,\"ShipUnitNo\":null,\"NetWeight\":0,\"GrossWeight\":0,\"StreetS\":\"TEST1,\",\"BlockS\":null,\"BuildingS\":null,\"CityS\":\"IQUIQUE\",\"ZipCodeS\":null,\"CountyS\":\"IQUIQUE\",\"StateS\":null,\"CountryS\":null,\"StreetB\":\"TEST 2,\",\"BlockB\":null,\"BuildingB\":null,\"CityB\":\"IQUIQUE\",\"ZipCodeB\":null,\"CountyB\":\"IQUIQUE\",\"StateB\":null,\"CountryB\":null,\"ImportOrExport\":null,\"MainUsage\":null,\"GlobalLocationNumberS\":null,\"GlobalLocationNumberB\":null,\"TaxId12\":null,\"TaxId13\":null,\"BillOfEntryNo\":null,\"BillOfEntryDate\":null,\"OriginalBillOfEntryNo\":null,\"OriginalBillOfEntryDate\":null,\"ImportOrExportType\":\"et_IpmortsOrExports\",\"PortCode\":null,\"DocEntry\":180,\"BoEValue\":0,\"ClaimRefund\":null,\"DifferentialOfTaxRate\":null,\"IsIGSTAccount\":null},\"AddressExtension\":{\"ShipToStreet\":\"TEST1,\",\"ShipToStreetNo\":null,\"ShipToBlock\":null,\"ShipToBuilding\":null,\"ShipToCity\":\"IQUIQUE\",\"ShipToZipCode\":null,\"ShipToCounty\":\"IQUIQUE\",\"ShipToState\":null,\"ShipToCountry\":null,\"ShipToAddressType\":null,\"BillToStreet\":\"TEST 2,\",\"BillToStreetNo\":null,\"BillToBlock\":null,\"BillToBuilding\":null,\"BillToCity\":\"IQUIQUE\",\"BillToZipCode\":null,\"BillToCounty\":\"IQUIQUE\",\"BillToState\":null,\"BillToCountry\":null,\"BillToAddressType\":null,\"ShipToGlobalLocationNumber\":null,\"BillToGlobalLocationNumber\":null,\"ShipToAddress2\":null,\"ShipToAddress3\":null,\"BillToAddress2\":null,\"BillToAddress3\":null,\"PlaceOfSupply\":null,\"PurchasePlaceOfSupply\":null,\"DocEntry\":180,\"GoodsIssuePlaceBP\":null,\"GoodsIssuePlaceCNPJ\":null,\"GoodsIssuePlaceCPF\":null,\"GoodsIssuePlaceStreet\":null,\"GoodsIssuePlaceStreetNo\":null,\"GoodsIssuePlaceBuilding\":null,\"GoodsIssuePlaceZip\":null,\"GoodsIssuePlaceBlock\":null,\"GoodsIssuePlaceCity\":null,\"GoodsIssuePlaceCounty\":null,\"GoodsIssuePlaceState\":null,\"GoodsIssuePlaceCountry\":null,\"GoodsIssuePlacePhone\":null,\"GoodsIssuePlaceEMail\":null,\"GoodsIssuePlaceDepartureDate\":null,\"DeliveryPlaceBP\":null,\"DeliveryPlaceCNPJ\":null,\"DeliveryPlaceCPF\":null,\"DeliveryPlaceStreet\":null,\"DeliveryPlaceStreetNo\":null,\"DeliveryPlaceBuilding\":null,\"DeliveryPlaceZip\":null,\"DeliveryPlaceBlock\":null,\"DeliveryPlaceCity\":null,\"DeliveryPlaceCounty\":null,\"DeliveryPlaceState\":null,\"DeliveryPlaceCountry\":null,\"DeliveryPlacePhone\":null,\"DeliveryPlaceEMail\":null,\"DeliveryPlaceDepartureDate\":null},\"DocumentReferences\":[]}},\"FacturaReserva\":{\"operation\":\"add\",\"status\":201,\"body\":{\"odata.metadata\":\"https://hanab1:50000/b1s/v1/script/$metadata#Invoices/@Element\",\"odata.etag\":\"W/\\\"356A192B7913B04C54574D18C28D46E6395428AB\\\"\",\"DocEntry\":78,\"DocNum\":12,\"DocType\":\"dDocument_Items\",\"HandWritten\":\"tNO\",\"Printed\":\"psNo\",\"DocDate\":\"2022-01-12\",\"DocDueDate\":\"2022-01-12\",\"CardCode\":\"CTEST1\",\"CardName\":\"DELIA RIQUELME VERA\",\"Address\":\"TEST 2,\\r\\rIQUIQUE\\rCHILE\",\"NumAtCard\":null,\"DocTotal\":4165,\"AttachmentEntry\":null,\"DocCurrency\":\"CLP\",\"DocRate\":1,\"Reference1\":\"12\",\"Reference2\":null,\"Comments\":\"Basado en Pedidos de cliente 13.\",\"JournalMemo\":\"Facturas clientes - CTEST1\",\"PaymentGroupCode\":-1,\"DocTime\":\"12:11:00\",\"SalesPersonCode\":1,\"TransportationCode\":-1,\"Confirmed\":\"tYES\",\"ImportFileNum\":null,\"SummeryType\":\"dNoSummary\",\"ContactPersonCode\":1518,\"ShowSCN\":\"tNO\",\"Series\":6,\"TaxDate\":\"2022-01-12\",\"PartialSupply\":\"tYES\",\"DocObjectCode\":\"oInvoices\",\"ShipToCode\":\"DESPACHO\",\"Indicator\":\"39\",\"FederalTaxID\":\"9746170-8\",\"DiscountPercent\":0,\"PaymentReference\":\"\",\"CreationDate\":\"2022-01-12\",\"UpdateDate\":\"2022-01-12\",\"FinancialPeriod\":14,\"UserSign\":28,\"TransNum\":107,\"VatSum\":665,\"VatSumSys\":1,\"VatSumFc\":0,\"NetProcedure\":\"tNO\",\"DocTotalFc\":0,\"DocTotalSys\":5,\"Form1099\":null,\"Box1099\":null,\"RevisionPo\":\"tNO\",\"RequriedDate\":null,\"CancelDate\":null,\"BlockDunning\":\"tNO\",\"Submitted\":\"tNO\",\"Segment\":0,\"PickStatus\":\"tNO\",\"Pick\":\"tNO\",\"PaymentMethod\":null,\"PaymentBlock\":\"tNO\",\"PaymentBlockEntry\":null,\"CentralBankIndicator\":null,\"MaximumCashDiscount\":\"tNO\",\"Reserve\":\"tNO\",\"Project\":null,\"ExemptionValidityDateFrom\":null,\"ExemptionValidityDateTo\":null,\"WareHouseUpdateType\":\"dwh_CustomerOrders\",\"Rounding\":\"tNO\",\"ExternalCorrectedDocNum\":null,\"InternalCorrectedDocNum\":null,\"NextCorrectingDocument\":null,\"DeferredTax\":\"tNO\",\"TaxExemptionLetterNum\":null,\"WTApplied\":0,\"WTAppliedFC\":0,\"BillOfExchangeReserved\":\"tNO\",\"AgentCode\":null,\"WTAppliedSC\":0,\"TotalEqualizationTax\":0,\"TotalEqualizationTaxFC\":0,\"TotalEqualizationTaxSC\":0,\"NumberOfInstallments\":1,\"ApplyTaxOnFirstInstallment\":\"tNO\",\"WTNonSubjectAmount\":0,\"WTNonSubjectAmountSC\":0,\"WTNonSubjectAmountFC\":0,\"WTExemptedAmount\":0,\"WTExemptedAmountSC\":0,\"WTExemptedAmountFC\":0,\"BaseAmount\":0,\"BaseAmountSC\":0,\"BaseAmountFC\":0,\"WTAmount\":0,\"WTAmountSC\":0,\"WTAmountFC\":0,\"VatDate\":null,\"DocumentsOwner\":null,\"FolioPrefixString\":null,\"FolioNumber\":null,\"DocumentSubType\":\"bod_None\",\"BPChannelCode\":null,\"BPChannelContact\":null,\"Address2\":\"TEST1,\\r\\rIQUIQUE\\rCHILE\",\"DocumentStatus\":\"bost_Open\",\"PeriodIndicator\":\"Valor de p\",\"PayToCode\":\"\",\"ManualNumber\":null,\"UseShpdGoodsAct\":\"tNO\",\"IsPayToBank\":null,\"PayToBankCountry\":null,\"PayToBankCode\":null,\"PayToBankAccountNo\":null,\"PayToBankBranch\":null,\"BPL_IDAssignedToInvoice\":null,\"DownPayment\":0,\"ReserveInvoice\":\"tYES\",\"LanguageCode\":25,\"TrackingNumber\":null,\"PickRemark\":\"\",\"ClosingDate\":null,\"SequenceCode\":null,\"SequenceSerial\":null,\"SeriesString\":null,\"SubSeriesString\":null,\"SequenceModel\":\"0\",\"UseCorrectionVATGroup\":\"tNO\",\"TotalDiscount\":0,\"DownPaymentAmount\":0,\"DownPaymentPercentage\":0,\"DownPaymentType\":\"dptInvoice\",\"DownPaymentAmountSC\":0,\"DownPaymentAmountFC\":0,\"VatPercent\":0,\"ServiceGrossProfitPercent\":0,\"OpeningRemarks\":null,\"ClosingRemarks\":null,\"RoundingDiffAmount\":0,\"RoundingDiffAmountFC\":0,\"RoundingDiffAmountSC\":0,\"Cancelled\":\"tNO\",\"SignatureInputMessage\":null,\"SignatureDigest\":null,\"CertificationNumber\":null,\"PrivateKeyVersion\":null,\"ControlAccount\":\"110401001\",\"InsuranceOperation347\":\"tNO\",\"ArchiveNonremovableSalesQuotation\":\"tNO\",\"GTSChecker\":null,\"GTSPayee\":null,\"ExtraMonth\":0,\"ExtraDays\":0,\"CashDiscountDateOffset\":0,\"StartFrom\":\"pdt_None\",\"NTSApproved\":\"tNO\",\"ETaxWebSite\":null,\"ETaxNumber\":null,\"NTSApprovedNumber\":null,\"EDocGenerationType\":\"edocNotRelevant\",\"EDocSeries\":null,\"EDocNum\":null,\"EDocExportFormat\":null,\"EDocStatus\":\"edoc_Ok\",\"EDocErrorCode\":null,\"EDocErrorMessage\":null,\"DownPaymentStatus\":\"so_Open\",\"GroupSeries\":null,\"GroupNumber\":null,\"GroupHandWritten\":\"tNO\",\"ReopenOriginalDocument\":null,\"ReopenManuallyClosedOrCanceledDocument\":null,\"CreateOnlineQuotation\":\"tNO\",\"POSEquipmentNumber\":null,\"POSManufacturerSerialNumber\":null,\"POSCashierNumber\":null,\"ApplyCurrentVATRatesForDownPaymentsToDraw\":\"tNO\",\"ClosingOption\":\"coByCurrentSystemDate\",\"SpecifiedClosingDate\":null,\"OpenForLandedCosts\":\"tYES\",\"AuthorizationStatus\":\"dasWithout\",\"TotalDiscountFC\":0,\"TotalDiscountSC\":0,\"RelevantToGTS\":\"tNO\",\"BPLName\":null,\"VATRegNum\":null,\"AnnualInvoiceDeclarationReference\":null,\"Supplier\":null,\"Releaser\":null,\"Receiver\":null,\"BlanketAgreementNumber\":null,\"IsAlteration\":\"tNO\",\"CancelStatus\":\"csNo\",\"AssetValueDate\":null,\"InvoicePayment\":\"tNO\",\"DocumentDelivery\":\"ddtNoneSeleted\",\"AuthorizationCode\":null,\"StartDeliveryDate\":null,\"StartDeliveryTime\":null,\"EndDeliveryDate\":null,\"EndDeliveryTime\":null,\"VehiclePlate\":null,\"ATDocumentType\":null,\"ElecCommStatus\":null,\"ElecCommMessage\":null,\"ReuseDocumentNum\":\"tNO\",\"ReuseNotaFiscalNum\":\"tNO\",\"PrintSEPADirect\":\"tNO\",\"FiscalDocNum\":null,\"POSDailySummaryNo\":null,\"POSReceiptNo\":null,\"PointOfIssueCode\":null,\"Letter\":null,\"FolioNumberFrom\":null,\"FolioNumberTo\":null,\"InterimType\":\"boidt_None\",\"RelatedType\":-1,\"RelatedEntry\":null,\"SAPPassport\":null,\"DocumentTaxID\":null,\"DateOfReportingControlStatementVAT\":null,\"ReportingSectionControlStatementVAT\":null,\"ExcludeFromTaxReportControlStatementVAT\":\"tNO\",\"POS_CashRegister\":null,\"UpdateTime\":\"12:11:13\",\"CreateQRCodeFrom\":null,\"PriceMode\":null,\"Revision\":\"tNO\",\"OriginalRefNo\":null,\"OriginalRefDate\":null,\"GSTTransactionType\":null,\"OriginalCreditOrDebitNo\":null,\"OriginalCreditOrDebitDate\":null,\"ECommerceOperator\":null,\"ECommerceGSTIN\":null,\"ShipFrom\":\"DESPACHO\",\"CommissionTrade\":\"ct_Empty\",\"CommissionTradeReturn\":\"tNO\",\"UseBillToAddrToDetermineTax\":\"tNO\",\"IssuingReason\":1,\"Cig\":null,\"Cup\":null,\"EDocType\":\"edocFE\",\"FCEAsPaymentMeans\":\"tNO\",\"PaidToDate\":0,\"PaidToDateFC\":0,\"PaidToDateSys\":0,\"BaseType\":-1,\"BaseEntry\":null,\"FatherCard\":null,\"FatherType\":\"cPayments_sum\",\"ShipState\":null,\"ShipPlace\":null,\"CustOffice\":null,\"FCI\":null,\"AddLegIn\":null,\"LegTextF\":null,\"DANFELgTxt\":null,\"IndFinal\":\"tNO\",\"DataVersion\":1,\"U_SEI_CONTADO\":\"S\",\"U_SEI_FEBOSID\":null,\"U_SEI_FCHV\":null,\"U_Bol_Ini\":0,\"U_Bol_Fin\":0,\"U_NUMFACT\":null,\"U_SEI_PTT\":null,\"U_SEI_RTCH\":null,\"U_SEI_RTTR\":null,\"U_SEI_NCHF\":null,\"U_SEI_IMPR\":\"0\",\"U_SEI_TDES\":null,\"U_SEI_ITRS\":\"1\",\"U_SEI_ISER\":null,\"U_SEI_ISERB\":null,\"U_SEI_INREF\":\"801\",\"U_SEI_FOREF\":\"19/2021\",\"U_SEI_FEREF\":\"2021-11-30\",\"U_SEI_CREF\":\"0\",\"U_SEI_RAREF\":null,\"U_SEI_INREF2\":null,\"U_SEI_FOREF2\":null,\"U_SEI_FEREF2\":null,\"U_SEI_CREF2\":\"0\",\"U_SEI_RAREF2\":null,\"U_SEI_INREF3\":null,\"U_SEI_FOREF3\":null,\"U_SEI_FEREF3\":null,\"U_SEI_CREF3\":\"0\",\"U_SEI_RAREF3\":null,\"U_SEI_INREF4\":null,\"U_SEI_FOREF4\":null,\"U_SEI_FEREF4\":null,\"U_SEI_CREF4\":\"0\",\"U_SEI_RAREF4\":null,\"U_SEI_INREF5\":null,\"U_SEI_FOREF5\":null,\"U_SEI_FEREF5\":null,\"U_SEI_CREF5\":\"0\",\"U_SEI_RAREF5\":null,\"U_SEI_TBULTOS\":null,\"U_SEI_Name\":null,\"U_SEI_UnitPrice\":0,\"U_SEI_LineTotal\":0,\"U_SEI_VIATRANSPORTE\":0,\"U_SEI_CLAUSULAV\":0,\"U_SEI_IND\":\"52\",\"U_SEI_TTCOMPRA\":\"0\",\"U_SEI_TTVENTA\":\"0\",\"U_SEI_MVENTA\":\"0\",\"U_SEI_ESTDOC\":\"0\",\"U_SEI_CARPIMPORT\":null,\"U_SEI_PAISRECEPTOR\":null,\"U_SEI_PAISDESTINO\":null,\"U_SEI_PUERTOEMB\":null,\"U_SEI_PUERTODESEMB\":null,\"U_SEI_MOTIVO\":null,\"U_SEI_IDPS\":\"856\",\"Document_ApprovalRequests\":[],\"DocumentLines\":[{\"LineNum\":0,\"ItemCode\":\"INAIPSOY02\",\"ItemDescription\":\"SUPPRO NUGGET CACAO\",\"Quantity\":1,\"ShipDate\":\"2021-12-07\",\"Price\":3500,\"PriceAfterVAT\":4165,\"Currency\":\"CLP\",\"Rate\":0,\"DiscountPercent\":0,\"VendorNum\":null,\"SerialNum\":null,\"WarehouseCode\":\"BODMATRZ\",\"SalesPersonCode\":1,\"CommisionPercent\":0,\"TreeType\":\"iNotATree\",\"AccountCode\":\"710101001\",\"UseBaseUnits\":\"tNO\",\"SupplierCatNum\":null,\"CostingCode\":\"CC01\",\"ProjectCode\":null,\"BarCode\":null,\"VatGroup\":null,\"Height1\":0,\"Hight1Unit\":null,\"Height2\":0,\"Height2Unit\":null,\"Lengh1\":0,\"Lengh1Unit\":null,\"Lengh2\":0,\"Lengh2Unit\":null,\"Weight1\":0,\"Weight1Unit\":null,\"Weight2\":0,\"Weight2Unit\":null,\"Factor1\":1,\"Factor2\":1,\"Factor3\":1,\"Factor4\":1,\"BaseType\":17,\"BaseEntry\":180,\"BaseLine\":0,\"Volume\":0,\"VolumeUnit\":4,\"Width1\":0,\"Width1Unit\":null,\"Width2\":0,\"Width2Unit\":null,\"Address\":\"\",\"TaxCode\":\"IVA\",\"TaxType\":\"tt_Yes\",\"TaxLiable\":\"tYES\",\"PickStatus\":\"tNO\",\"PickQuantity\":0,\"PickListIdNumber\":null,\"OriginalItem\":null,\"BackOrder\":\"tYES\",\"FreeText\":null,\"ShippingMethod\":-1,\"POTargetNum\":null,\"POTargetEntry\":null,\"POTargetRowNum\":null,\"CorrectionInvoiceItem\":\"ciis_ShouldBe\",\"CorrInvAmountToStock\":0,\"CorrInvAmountToDiffAcct\":0,\"AppliedTax\":0,\"AppliedTaxFC\":0,\"AppliedTaxSC\":0,\"WTLiable\":\"tNO\",\"DeferredTax\":\"tNO\",\"EqualizationTaxPercent\":0,\"TotalEqualizationTax\":0,\"TotalEqualizationTaxFC\":0,\"TotalEqualizationTaxSC\":0,\"NetTaxAmount\":665,\"NetTaxAmountFC\":0,\"NetTaxAmountSC\":1,\"MeasureUnit\":\"kg\",\"UnitsOfMeasurment\":1,\"LineTotal\":3500,\"TaxPercentagePerRow\":19,\"TaxTotal\":665,\"ConsumerSalesForecast\":\"tYES\",\"ExciseAmount\":0,\"TaxPerUnit\":0,\"TotalInclTax\":0,\"CountryOrg\":null,\"SWW\":null,\"TransactionType\":null,\"DistributeExpense\":\"tYES\",\"RowTotalFC\":0,\"RowTotalSC\":4,\"LastBuyInmPrice\":0,\"LastBuyDistributeSumFc\":0,\"LastBuyDistributeSumSc\":0,\"LastBuyDistributeSum\":0,\"StockDistributesumForeign\":0,\"StockDistributesumSystem\":0,\"StockDistributesum\":0,\"StockInmPrice\":0,\"PickStatusEx\":\"dlps_NotPicked\",\"TaxBeforeDPM\":0,\"TaxBeforeDPMFC\":0,\"TaxBeforeDPMSC\":0,\"CFOPCode\":null,\"CSTCode\":null,\"Usage\":null,\"TaxOnly\":\"tNO\",\"VisualOrder\":0,\"BaseOpenQuantity\":1,\"UnitPrice\":3500,\"LineStatus\":\"bost_Open\",\"PackageQuantity\":1,\"Text\":null,\"LineType\":\"dlt_Regular\",\"COGSCostingCode\":\"CC01\",\"COGSAccountCode\":\"810201001\",\"ChangeAssemlyBoMWarehouse\":\"N\",\"GrossBuyPrice\":10000,\"GrossBase\":-1,\"GrossProfitTotalBasePrice\":10000,\"CostingCode2\":null,\"CostingCode3\":null,\"CostingCode4\":null,\"CostingCode5\":null,\"ItemDetails\":null,\"LocationCode\":null,\"ActualDeliveryDate\":\"2022-01-12\",\"RemainingOpenQuantity\":1,\"OpenAmount\":3500,\"OpenAmountFC\":0,\"OpenAmountSC\":4,\"ExLineNo\":null,\"RequiredDate\":null,\"RequiredQuantity\":0,\"COGSCostingCode2\":null,\"COGSCostingCode3\":null,\"COGSCostingCode4\":null,\"COGSCostingCode5\":null,\"CSTforIPI\":null,\"CSTforPIS\":null,\"CSTforCOFINS\":null,\"CreditOriginCode\":null,\"WithoutInventoryMovement\":\"tNO\",\"AgreementNo\":null,\"AgreementRowNumber\":null,\"ActualBaseEntry\":null,\"ActualBaseLine\":null,\"DocEntry\":78,\"Surpluses\":0,\"DefectAndBreakup\":0,\"Shortages\":0,\"ConsiderQuantity\":\"tNO\",\"PartialRetirement\":\"tNO\",\"RetirementQuantity\":0,\"RetirementAPC\":0,\"ThirdParty\":\"tNO\",\"PoNum\":null,\"PoItmNum\":null,\"ExpenseType\":null,\"ReceiptNumber\":null,\"ExpenseOperationType\":null,\"FederalTaxID\":null,\"GrossProfit\":-6500,\"GrossProfitFC\":0,\"GrossProfitSC\":-9,\"PriceSource\":\"dpsManual\",\"StgSeqNum\":null,\"StgEntry\":null,\"StgDesc\":null,\"UoMEntry\":-1,\"UoMCode\":\"Manual\",\"InventoryQuantity\":1,\"RemainingOpenInventoryQuantity\":1,\"ParentLineNum\":null,\"Incoterms\":0,\"TransportMode\":0,\"NatureOfTransaction\":null,\"DestinationCountryForImport\":null,\"DestinationRegionForImport\":null,\"OriginCountryForExport\":null,\"OriginRegionForExport\":null,\"ItemType\":\"dit_Item\",\"ChangeInventoryQuantityIndependently\":\"tNO\",\"FreeOfChargeBP\":\"tNO\",\"SACEntry\":null,\"HSNEntry\":null,\"GrossPrice\":4165,\"GrossTotal\":4165,\"GrossTotalFC\":0,\"GrossTotalSC\":5,\"NCMCode\":-1,\"NVECode\":null,\"IndEscala\":\"tNO\",\"CtrSealQty\":0,\"CNJPMan\":null,\"CESTCode\":null,\"UFFiscalBenefitCode\":null,\"ReverseCharge\":\"tNO\",\"ShipToCode\":\"DESPACHO\",\"ShipToDescription\":\"TEST1,\\r\\rIQUIQUE\\rCHILE\",\"ExternalCalcTaxRate\":0,\"ExternalCalcTaxAmount\":0,\"ExternalCalcTaxAmountFC\":0,\"ExternalCalcTaxAmountSC\":0,\"StandardItemIdentification\":null,\"CommodityClassification\":null,\"UnencumberedReason\":null,\"CUSplit\":\"tNO\",\"U_SEI_IDEX\":null,\"U_SEI_CODMIN\":null,\"U_SEI_ITEMIN\":null,\"LineTaxJurisdictions\":[{\"JurisdictionCode\":\"IVA\",\"JurisdictionType\":1,\"TaxAmount\":665,\"TaxAmountSC\":1,\"TaxAmountFC\":0,\"TaxRate\":19,\"DocEntry\":78,\"LineNumber\":0,\"RowSequence\":0,\"ExternalCalcTaxRate\":null,\"ExternalCalcTaxAmount\":null,\"ExternalCalcTaxAmountFC\":null,\"ExternalCalcTaxAmountSC\":null}],\"ExportProcesses\":[],\"EBooksDetails\":[],\"DocumentLineAdditionalExpenses\":[],\"WithholdingTaxLines\":[],\"SerialNumbers\":[],\"BatchNumbers\":[],\"CCDNumbers\":[],\"DocumentLinesBinAllocations\":[]}],\"EWayBillDetails\":{},\"ElectronicProtocols\":[],\"DocumentAdditionalExpenses\":[],\"WithholdingTaxDataWTXCollection\":[],\"WithholdingTaxDataCollection\":[],\"DocumentPackages\":[],\"DocumentSpecialLines\":[],\"DocumentInstallments\":[{\"DueDate\":\"2022-01-12\",\"Percentage\":100,\"Total\":4165,\"LastDunningDate\":null,\"DunningLevel\":0,\"TotalFC\":0,\"InstallmentId\":1,\"PaymentOrdered\":\"tNO\"}],\"DownPaymentsToDraw\":[],\"TaxExtension\":{\"TaxId0\":null,\"TaxId1\":null,\"TaxId2\":null,\"TaxId3\":null,\"TaxId4\":null,\"TaxId5\":null,\"TaxId6\":null,\"TaxId7\":null,\"TaxId8\":null,\"TaxId9\":null,\"State\":null,\"County\":null,\"Incoterms\":null,\"Vehicle\":null,\"VehicleState\":null,\"NFRef\":\"Basado en Pedidos de cliente 13.\",\"Carrier\":null,\"PackQuantity\":null,\"PackDescription\":null,\"Brand\":null,\"ShipUnitNo\":null,\"NetWeight\":0,\"GrossWeight\":0,\"StreetS\":\"TEST1,\",\"BlockS\":null,\"BuildingS\":null,\"CityS\":\"IQUIQUE\",\"ZipCodeS\":null,\"CountyS\":\"IQUIQUE\",\"StateS\":null,\"CountryS\":null,\"StreetB\":\"TEST 2,\",\"BlockB\":null,\"BuildingB\":null,\"CityB\":\"IQUIQUE\",\"ZipCodeB\":null,\"CountyB\":\"IQUIQUE\",\"StateB\":null,\"CountryB\":null,\"ImportOrExport\":null,\"MainUsage\":null,\"GlobalLocationNumberS\":null,\"GlobalLocationNumberB\":null,\"TaxId12\":null,\"TaxId13\":null,\"BillOfEntryNo\":null,\"BillOfEntryDate\":null,\"OriginalBillOfEntryNo\":null,\"OriginalBillOfEntryDate\":null,\"ImportOrExportType\":\"et_IpmortsOrExports\",\"PortCode\":null,\"DocEntry\":78,\"BoEValue\":0,\"ClaimRefund\":null,\"DifferentialOfTaxRate\":null,\"IsIGSTAccount\":null},\"AddressExtension\":{\"ShipToStreet\":\"TEST1,\",\"ShipToStreetNo\":null,\"ShipToBlock\":null,\"ShipToBuilding\":null,\"ShipToCity\":\"IQUIQUE\",\"ShipToZipCode\":null,\"ShipToCounty\":\"IQUIQUE\",\"ShipToState\":null,\"ShipToCountry\":null,\"ShipToAddressType\":null,\"BillToStreet\":\"TEST 2,\",\"BillToStreetNo\":null,\"BillToBlock\":null,\"BillToBuilding\":null,\"BillToCity\":\"IQUIQUE\",\"BillToZipCode\":null,\"BillToCounty\":\"IQUIQUE\",\"BillToState\":null,\"BillToCountry\":null,\"BillToAddressType\":null,\"ShipToGlobalLocationNumber\":null,\"BillToGlobalLocationNumber\":null,\"ShipToAddress2\":null,\"ShipToAddress3\":null,\"BillToAddress2\":null,\"BillToAddress3\":null,\"PlaceOfSupply\":null,\"PurchasePlaceOfSupply\":null,\"DocEntry\":78,\"GoodsIssuePlaceBP\":null,\"GoodsIssuePlaceCNPJ\":null,\"GoodsIssuePlaceCPF\":null,\"GoodsIssuePlaceStreet\":null,\"GoodsIssuePlaceStreetNo\":null,\"GoodsIssuePlaceBuilding\":null,\"GoodsIssuePlaceZip\":null,\"GoodsIssuePlaceBlock\":null,\"GoodsIssuePlaceCity\":null,\"GoodsIssuePlaceCounty\":null,\"GoodsIssuePlaceState\":null,\"GoodsIssuePlaceCountry\":null,\"GoodsIssuePlacePhone\":null,\"GoodsIssuePlaceEMail\":null,\"GoodsIssuePlaceDepartureDate\":null,\"DeliveryPlaceBP\":null,\"DeliveryPlaceCNPJ\":null,\"DeliveryPlaceCPF\":null,\"DeliveryPlaceStreet\":null,\"DeliveryPlaceStreetNo\":null,\"DeliveryPlaceBuilding\":null,\"DeliveryPlaceZip\":null,\"DeliveryPlaceBlock\":null,\"DeliveryPlaceCity\":null,\"DeliveryPlaceCounty\":null,\"DeliveryPlaceState\":null,\"DeliveryPlaceCountry\":null,\"DeliveryPlacePhone\":null,\"DeliveryPlaceEMail\":null,\"DeliveryPlaceDepartureDate\":null},\"DocumentReferences\":[]}},\"Pago\":{\"operation\":\"add\",\"status\":201,\"body\":{\"odata.metadata\":\"https://hanab1:50000/b1s/v1/script/$metadata#IncomingPayments/@Element\",\"odata.etag\":\"W/\\\"356A192B7913B04C54574D18C28D46E6395428AB\\\"\",\"DocNum\":9,\"DocType\":\"rCustomer\",\"HandWritten\":\"tNO\",\"Printed\":\"tNO\",\"DocDate\":\"2022-01-12\",\"CardCode\":\"CTEST1\",\"CardName\":\"DELIA RIQUELME VERA\",\"Address\":\"TEST 2,\\r\\rIQUIQUE\\rCHILE\",\"CashAccount\":null,\"DocCurrency\":\"CLP\",\"CashSum\":0,\"CheckAccount\":null,\"TransferAccount\":null,\"TransferSum\":0,\"TransferDate\":null,\"TransferReference\":null,\"LocalCurrency\":\"tNO\",\"DocRate\":0,\"Reference1\":\"9\",\"Reference2\":null,\"CounterReference\":null,\"Remarks\":null,\"JournalRemarks\":\"Pagos recibidos - CTEST1\",\"SplitTransaction\":\"tNO\",\"ContactPersonCode\":1518,\"ApplyVAT\":\"tNO\",\"TaxDate\":\"2022-01-12\",\"Series\":28,\"BankCode\":null,\"BankAccount\":null,\"DiscountPercent\":0,\"ProjectCode\":null,\"CurrencyIsLocal\":\"tNO\",\"DeductionPercent\":0,\"DeductionSum\":0,\"CashSumFC\":0,\"CashSumSys\":0,\"BoeAccount\":null,\"BillOfExchangeAmount\":0,\"BillofExchangeStatus\":null,\"BillOfExchangeAmountFC\":0,\"BillOfExchangeAmountSC\":0,\"BillOfExchangeAgent\":null,\"WTCode\":null,\"WTAmount\":0,\"WTAmountFC\":0,\"WTAmountSC\":0,\"WTAccount\":null,\"WTTaxableAmount\":0,\"Proforma\":\"tNO\",\"PayToBankCode\":null,\"PayToBankBranch\":null,\"PayToBankAccountNo\":null,\"PayToCode\":\"FACTURACION\",\"PayToBankCountry\":null,\"IsPayToBank\":\"tNO\",\"DocEntry\":28,\"PaymentPriority\":\"bopp_Priority_6\",\"TaxGroup\":null,\"BankChargeAmount\":0,\"BankChargeAmountInFC\":0,\"BankChargeAmountInSC\":0,\"UnderOverpaymentdifference\":0,\"UnderOverpaymentdiffSC\":0,\"WtBaseSum\":0,\"WtBaseSumFC\":0,\"WtBaseSumSC\":0,\"VatDate\":null,\"TransactionCode\":null,\"PaymentType\":\"bopt_None\",\"TransferRealAmount\":0,\"DocObjectCode\":\"bopot_IncomingPayments\",\"DocTypte\":\"rCustomer\",\"DueDate\":\"2022-01-12\",\"LocationCode\":null,\"Cancelled\":\"tNO\",\"ControlAccount\":\"110401001\",\"UnderOverpaymentdiffFC\":0,\"AuthorizationStatus\":\"pasWithout\",\"BPLID\":null,\"BPLName\":null,\"VATRegNum\":null,\"BlanketAgreement\":null,\"PaymentByWTCertif\":\"tNO\",\"Cig\":null,\"Cup\":null,\"AttachmentEntry\":null,\"SignatureInputMessage\":null,\"SignatureDigest\":null,\"CertificationNumber\":null,\"PrivateKeyVersion\":null,\"PaymentChecks\":[],\"PaymentInvoices\":[{\"LineNum\":0,\"DocEntry\":78,\"SumApplied\":4165,\"AppliedFC\":0,\"AppliedSys\":5,\"DocRate\":0,\"DocLine\":0,\"InvoiceType\":\"it_Invoice\",\"DiscountPercent\":0,\"PaidSum\":0,\"InstallmentId\":1,\"WitholdingTaxApplied\":0,\"WitholdingTaxAppliedFC\":0,\"WitholdingTaxAppliedSC\":0,\"LinkDate\":null,\"DistributionRule\":null,\"DistributionRule2\":null,\"DistributionRule3\":null,\"DistributionRule4\":null,\"DistributionRule5\":null,\"TotalDiscount\":0,\"TotalDiscountFC\":0,\"TotalDiscountSC\":0}],\"PaymentCreditCards\":[{\"LineNum\":0,\"CreditCard\":1,\"CreditAcct\":\"110101001\",\"CreditCardNumber\":\"6789\",\"CardValidUntil\":\"2021-12-31\",\"VoucherNum\":\"200\",\"OwnerIdNum\":null,\"OwnerPhone\":null,\"PaymentMethodCode\":1,\"NumOfPayments\":1,\"FirstPaymentDue\":\"2022-01-12\",\"FirstPaymentSum\":4165,\"AdditionalPaymentSum\":0,\"CreditSum\":4165,\"CreditCur\":\"CLP\",\"CreditRate\":0,\"ConfirmationNum\":\"400\",\"NumOfCreditPayments\":1,\"CreditType\":\"cr_Regular\",\"SplitPayments\":\"tNO\"}],\"PaymentAccounts\":[],\"PaymentDocumentReferencesCollection\":[],\"BillOfExchange\":{},\"WithholdingTaxCertificatesCollection\":[],\"ElectronicProtocols\":[],\"CashFlowAssignments\":[{\"CashFlowAssignmentsID\":20,\"CashFlowLineItemID\":2,\"Credit\":0,\"PaymentMeans\":\"pmtCreditCard\",\"CheckNumber\":\"1\",\"AmountLC\":4165,\"AmountFC\":0,\"JDTLineId\":0}],\"Payments_ApprovalRequests\":[],\"WithholdingTaxDataWTXCollection\":[]}}}",
            "Facturado": True,
            "DetalleFacturado": "{\"FEL\":{\"Success\":\"true\",\"Mensaje\":\"Documento Enviado\",\"Folio\":\"21\",\"Febos Id\":\"4a8980e2202d624a51290ba2b0456f48e443\"}}",
            "Error": "",
            "Folio": "21",
            "FebosID": "4a8980e2202d624a51290ba2b0456f48e443",
            "DocEntry": 78,
            "IndicadorFinanciero": "39",
            "LinkPDF": "https://archivos.febos.io/temporal/1642000299164/E76764595-3_39_21.0.pdf",
            "Id": 856
        }
